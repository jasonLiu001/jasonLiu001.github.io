---
title: "微信小程序开发笔记"
date: 2017-11-30 16:21:00 +0800
---

+ `wx.authorize`

  该授权接口可以多次调用，接口内部已经有处理，例如如下代码：

  ```javascript
  wx.getSetting({
      success(res) {
       /*
          下面的wx.authorize在res.authSetting['scope.record']两种值的情况下会调用
          	1. undefined--用户未授权
          	2. false--用户之前已拒绝授权
       */      
          if (!res.authSetting['scope.record']) {
              wx.authorize({
                  scope: 'scope.record',
                  success() {
                      // 用户已经同意小程序使用录音功能，后续调用 wx.startRecord 接口不会弹窗询问
                      wx.startRecord()
                  }
              })
          }
      }
  })
  ```

  ​